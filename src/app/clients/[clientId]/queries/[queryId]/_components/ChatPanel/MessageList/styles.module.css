.virtual-list {
  position: relative; /* absolute-positioned items live inside */
  display: block;
  padding-bottom: var(--space-6); /* ensure last item has breathing room above sticky composer */
}

/* Virtualizer root to fill container height and manage scroll */
.virtual-scroller {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  /* AIDEV-NOTE: Keep layout stable when scrollbar visuals fade in/out */
  scrollbar-gutter: stable;
  /* AIDEV-NOTE: Base state hides scrollbar visuals; width unchanged */
  scrollbar-color: transparent transparent;
}

.message {
  display: block;
  margin-bottom: var(--space-5);
  padding-inline-start: 12px;
  padding-inline-end: 2px;
}

@media (prefers-reduced-motion: reduce) {
  .send > svg { transition: none; }
}

.user-bubble {
  padding: var(--space-2);
  border: var(--border-1) solid var(--border-tertiary);
  border-radius: var(--radius-8);
  background: var(--surface-2);
  white-space: pre-wrap;
  overflow-wrap: anywhere; /* wrap long unbroken strings */
  word-break: break-word;
  max-height: none;
  contain: content; /* isolate layout/paint for smoother scroll */
}

.user-bubble[data-collapsed] {
  cursor: pointer;
  max-height: var(--space-22);
  overflow: hidden;
}

.assistant { display: grid; gap: var(--space-2); }
.assistant-meta {
  color: var(--text-secondary);
  font-size: var(--text-xs);
}
.assistant-plain {
  color: var(--text-primary);
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* Plain text renderer for collapsed user messages */
.user-plain {
  color: var(--text-primary);
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* AIDEV-NOTE: When an ancestor (ChatPanel .content) has [data-scrollable],
   add a small inline-end padding so items don't collide with the scrollbar. */
:global([data-scrollable]) .message {
  padding-inline-end: 2px;
}


/* AIDEV-NOTE: Hover/focus fade-in for scrollbar visuals without changing thickness */
.virtual-scroller::-webkit-scrollbar-thumb,
.virtual-scroller::-webkit-scrollbar-track {
  background-color: transparent;
  transition: background-color var(--duration-150) var(--ease-standard);
}

.virtual-scroller:hover::-webkit-scrollbar-thumb,
.virtual-scroller:focus-visible::-webkit-scrollbar-thumb,
.virtual-scroller:focus-within::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklch, var(--foreground) 25%, transparent);
}

/* Track remains transparent; no width/thickness changes applied */
.virtual-scroller:hover::-webkit-scrollbar-track,
.virtual-scroller:focus-visible::-webkit-scrollbar-track,
.virtual-scroller:focus-within::-webkit-scrollbar-track {
  background-color: transparent;
}

/* Firefox: reveal thumb color on hover/focus without changing width */
.virtual-scroller:hover,
.virtual-scroller:focus-visible,
.virtual-scroller:focus-within {
  scrollbar-color: color-mix(in oklch, var(--foreground) 25%, transparent) transparent;
}

@media (prefers-reduced-motion: reduce) {
  .virtual-scroller::-webkit-scrollbar-thumb,
  .virtual-scroller::-webkit-scrollbar-track { transition: none; }
}


/* media/container queries at the bottom (reserved) */
