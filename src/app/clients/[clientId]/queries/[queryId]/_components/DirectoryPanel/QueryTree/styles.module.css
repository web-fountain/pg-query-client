.tree {
  display         : flex;
  flex-direction  : column;
  min-height      : 0; /* allow child scroll areas to size */
  height          : 100%;
  overflow        : hidden; /* keep window from scrolling; delegate to .scroller */
}

.list {
  user-select : none; /* AIDEV-NOTE: preserve selection for tree a11y via roving tabindex */
  position    : relative; /* virtualized absolute children positioning */
}

.scroller {
  position            : relative;
  overflow            : auto;
  flex                : 1;
  min-height          : 0;
  height              : 100%;
  margin-inline-end   : -1px; /* scrollbar is right against the browser edge */
  overscroll-behavior : contain; /* keep scroll interactions local to panel */
  padding-block-end   : var(--space-4);
  scrollbar-gutter    : stable; /* keep layout stable when thumb fades */
  scrollbar-color     : transparent transparent; /* base hidden visuals */
}

/* AIDEV-NOTE: Section toolbar overlay sits at the top-right of the active top-level folder row. */
.section-toolbar {
  position: absolute;
  left: 0;
  top: 4px;
  right: -2px;

  display: flex;
  justify-content: flex-end;
  align-items: center;
  pointer-events: none; /* allow clicks to pass through except on the toolbar itself */
}
.section-toolbar > * {
  pointer-events: auto; /* re-enable interaction on toolbar */
}
/* Ensure only one overlay shows and it sits above rows. */
.section-toolbar { z-index: 2; }
.section-toolbar[data-visible="false"] {
  visibility: hidden;
  opacity: 0;
}
.section-toolbar[data-visible="true"] {
  visibility: visible;
  opacity: 1;
  transition: opacity var(--duration-150) var(--ease-standard);
}

/* AIDEV-NOTE: Hover/focus fade-in for scrollbar visuals without changing thickness */
.scroller::-webkit-scrollbar-thumb,
.scroller::-webkit-scrollbar-track {
  background-color: transparent;
  transition: background-color var(--duration-150) var(--ease-standard);
}

.scroller:hover::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklch, var(--foreground) 25%, transparent);
}

.scroller:hover::-webkit-scrollbar-track {
  background-color: transparent;
}

/* Firefox reveal */
.scroller:hover {
  scrollbar-color: color-mix(in oklch, var(--foreground) 25%, transparent) transparent;
}
